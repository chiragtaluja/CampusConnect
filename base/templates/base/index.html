{% extends "main.html" %}

{% load static %}

{% block content %}

    {% if request.user.is_authenticated %}
    
    {% else %}

<style>
    .text-shadow {
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.25);
    }
    .slider::-webkit-scrollbar {
      display: none;
    }
    .slider-container { position: relative; width: 100vw; height: 100vh; overflow: hidden; display: flex; justify-content: center; align-items: center; 
    } 
    .slider { display: flex; width: calc(100vw * 6); /* duplicate images to loop smoothly */ animation: slide 30s linear infinite; } 
    .slide { width: 100vw; height: 100vh; flex-shrink: 0; position: relative; } 
    .slide img { width: 100%; height: 100%; object-fit: cover; filter: brightness(0.9); box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5); } 
    .divider { position: absolute; top: 0; bottom: 0; left: 50%; width: 3px; background: rgba(255, 255, 255, 0.9); box-shadow: 0 0 15px rgba(255, 255, 255, 0.8); transform: translateX(-50%); z-index: 2; }
     @keyframes slide { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
</style>



  <div class="bg-white flex flex-col  items-center  text-center px-4 mb-5 ">
    <!-- Title Section -->
  <h1 class="text-7xl md:text-5xl font-extrabold text-red-600 text-shadow tracking-wide mb-2">
    MAHARISHI MARKANDESHWAR
  </h1>
  <h2 class="text-lg md:text-xl font-semibold text-red-700 italic mb-1">
    (DEEMED TO BE UNIVERSITY)
  </h2>
  <p class="text-lg md:text-xl text-black font-medium mb-8">
    Established under section 3 of the UGC Act. 1956
  </p>

    <div class="w-full"> 
        <!-- <div class="w-full overflow-hidden relative shadow-xl">
            <div id="sliderTrack" class="flex"> 
                
                <div class="flex-shrink-0 w-full md:w-1/2 lg:w-1/4 p-2 aspect-[2/1] rounded-lg  h-auto">
                    <img src="{% static 'base/assets/img/index1.webp' %}" alt="Image 1" class="w-full h-full rounded-lg object-cover">
                </div>
                
                <div class="flex-shrink-0 w-full md:w-1/2 lg:w-1/4 p-2 aspect-[2/1] h-auto rounded-lg ">
                    <img src="{% static 'base/assets/img/index2.webp' %}" alt="Image 2" class="w-full h-full rounded-lg object-cover">
                </div>
                
                <div class="flex-shrink-0 w-full md:w-1/2 lg:w-1/4 p-2 aspect-[2/1] h-auto rounded-lg ">
                    <img src="{% static 'base/assets/img/index3.webp' %}" alt="Image 3" class="w-full h-full rounded-lg object-cover">
                </div>
                
                <div class="flex-shrink-0 w-full md:w-1/2 lg:w-1/4 p-2 aspect-[2/1] h-auto rounded-lg ">
                    <img src="{% static 'base/assets/img/index4.webp' %}" alt="Image 4" class="w-full h-full rounded-lg object-cover">
                </div>
                                <div class="flex-shrink-0 w-full md:w-1/2 lg:w-1/4 p-2 aspect-[2/1] rounded-lg  h-auto">
                    <img src="{% static 'base/assets/img/index5.webp' %}" alt="Image 1" class="w-full h-full rounded-lg object-cover">
                </div>
                
                <div class="flex-shrink-0 w-full md:w-1/2 lg:w-1/4 p-2 aspect-[2/1] h-auto rounded-lg ">
                    <img src="{% static 'base/assets/img/index6.webp' %}" alt="Image 2" class="w-full h-full rounded-lg object-cover">
                </div>
                
                <div class="flex-shrink-0 w-full md:w-1/2 lg:w-1/4 p-2 aspect-[2/1] h-auto rounded-lg ">
                    <img src="{% static 'base/assets/img/index7.webp' %}" alt="Image 3" class="w-full h-full rounded-lg object-cover">
                </div>
                
                <div class="flex-shrink-0 w-full md:w-1/2 lg:w-1/4 p-2 aspect-[2/1] h-auto rounded-lg ">
                    <img src="{% static 'base/assets/img/index8.webp' %}" alt="Image 4" class="w-full h-full rounded-lg object-cover">
                </div>
            </div>
        </div> -->

        <div id="sliderTrack" class="flex"> 
            <div class="flex-shrink-0 w-full md:w-1/4 lg:w-1/6 p-2 aspect-[2/1] h-auto rounded-lg" data-slide="1"><img src="{% static 'base/assets/img/index1.webp' %}" class="w-full h-full rounded-lg object-cover"></div>
            <div class="flex-shrink-0 w-full md:w-1/4 lg:w-1/6 p-2 aspect-[2/1] h-auto rounded-lg" data-slide="2"><img src="{% static 'base/assets/img/index2.webp' %}" class="w-full h-full rounded-lg object-cover"></div>
            <div class="flex-shrink-0 w-full md:w-1/4 lg:w-1/6 p-2 aspect-[2/1] h-auto rounded-lg" data-slide="3"><img src="{% static 'base/assets/img/index3.webp' %}" class="w-full h-full rounded-lg object-cover"></div>
            <div class="flex-shrink-0 w-full md:w-1/4 lg:w-1/6 p-2 aspect-[2/1] h-auto rounded-lg" data-slide="4"><img src="{% static 'base/assets/img/index4.webp' %}" class="w-full h-full rounded-lg object-cover"></div>
            <div class="flex-shrink-0 w-full md:w-1/4 lg:w-1/6 p-2 aspect-[2/1] h-auto rounded-lg" data-slide="5"><img src="{% static 'base/assets/img/index5.webp' %}" class="w-full h-full rounded-lg object-cover"></div>
            <div class="flex-shrink-0 w-full md:w-1/4 lg:w-1/6 p-2 aspect-[2/1] h-auto rounded-lg" data-slide="6"><img src="{% static 'base/assets/img/index6.webp' %}" class="w-full h-full rounded-lg object-cover"></div>
            <div class="flex-shrink-0 w-full md:w-1/4 lg:w-1/6 p-2 aspect-[2/1] h-auto rounded-lg" data-slide="7"><img src="{% static 'base/assets/img/index7.webp' %}" class="w-full h-full rounded-lg object-cover"></div>
            <div class="flex-shrink-0 w-full md:w-1/4 lg:w-1/6 p-2 aspect-[2/1] h-auto rounded-lg" data-slide="8"><img src="{% static 'base/assets/img/index8.webp' %}" class="w-full h-full rounded-lg object-cover"></div>
            
            <div class="flex-shrink-0 w-full md:w-1/4 lg:w-1/6 p-2 aspect-[2/1] h-auto rounded-lg" data-slide="1-CLONE"><img src="{% static 'base/assets/img/index1.webp' %}" class="w-full h-full rounded-lg object-cover"></div>
            <div class="flex-shrink-0 w-full md:w-1/4 lg:w-1/6 p-2 aspect-[2/1] h-auto rounded-lg" data-slide="2-CLONE"><img src="{% static 'base/assets/img/index2.webp' %}" class="w-full h-full rounded-lg object-cover"></div>
            <div class="flex-shrink-0 w-full md:w-1/4 lg:w-1/6 p-2 aspect-[2/1] h-auto rounded-lg" data-slide="3-CLONE"><img src="{% static 'base/assets/img/index3.webp' %}" class="w-full h-full rounded-lg object-cover"></div>
            <div class="flex-shrink-0 w-full md:w-1/4 lg:w-1/6 p-2 aspect-[2/1] h-auto rounded-lg" data-slide="4-CLONE"><img src="{% static 'base/assets/img/index4.webp' %}" class="w-full h-full rounded-lg object-cover"></div>
            <div class="flex-shrink-0 w-full md:w-1/4 lg:w-1/6 p-2 aspect-[2/1] h-auto rounded-lg" data-slide="5-CLONE"><img src="{% static 'base/assets/img/index5.webp' %}" class="w-full h-full rounded-lg object-cover"></div>
            <div class="flex-shrink-0 w-full md:w-1/4 lg:w-1/6 p-2 aspect-[2/1] h-auto rounded-lg" data-slide="6-CLONE"><img src="{% static 'base/assets/img/index6.webp' %}" class="w-full h-full rounded-lg object-cover"></div>
        </div>

 


  </div>
</div>

 {% endif %}


<!-- {% include 'base/newsletter_component.html' %} -->

<!-- space for slider  -->


<h2 class=" mx-10 font-extrabold text-xl">Upcoming Events:</h2>
{% include 'base/event_component.html' %}
<a href="{% url 'upcoming_events' %}" class=" mx-10 font-extrabold text-xl">See all Upcoming Events</a>
<hr>
<a href="{% url 'past_events' %}" class=" mx-10 font-extrabold text-xl">See all Past Events</a>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const sliderTrack = document.getElementById('sliderTrack');
        
        // Use the count of ORIGINAL slides (8) not the total elements (8 + 6 = 14)
        const ORIGINAL_SLIDE_COUNT = 8; 
        let currentSlide = 0; 
        const slideInterval = 3500;
        const SMOOTH_TRANSITION = 'transform 0.5s ease-in-out';

        function getSlidesVisible() {
            const width = window.innerWidth;
            
            // This must match your HTML: lg:w-1/6, md:w-1/4
            if (width >= 1024) { 
                return 6; 
            } else if (width >= 768) {
                return 4; 
            } else {
                return 1; 
            }
        }

        function setupSlider() {
            const slidesVisible = getSlidesVisible();
            
            // Track width is based on total elements (ORIGINAL + CLONES)
            const TOTAL_ELEMENTS = sliderTrack.children.length;
            const trackWidth = (TOTAL_ELEMENTS / slidesVisible) * 100;
            sliderTrack.style.width = `${trackWidth}%`;
            
            // Reset position
            currentSlide = 0;
            sliderTrack.style.transition = 'none';
            sliderTrack.style.transform = `translateX(0)`;
        }

        function nextSlide() {
            const slidesVisible = getSlidesVisible();
            const shiftAmount = 100 / slidesVisible; 
            
            // Max index is based on ORIGINAL count (8) - we reset when currentSlide hits 8
            const MAX_SHIFT_INDEX = ORIGINAL_SLIDE_COUNT;
            
            currentSlide++;

            // Check if we have moved past the last ORIGINAL slide (into the clones)
            if (currentSlide > MAX_SHIFT_INDEX) {
                // Step 1: Immediately snap back to the start (no transition)
                currentSlide = 0;
                sliderTrack.style.transition = 'none'; 
                sliderTrack.style.transform = `translateX(0)`; 
                
                // Step 2: Re-enable transition after a tiny delay for the next smooth move
                setTimeout(() => {
                    currentSlide = 1; // Prepare for the next actual move
                    sliderTrack.style.transition = SMOOTH_TRANSITION;
                    let offset = currentSlide * shiftAmount;
                    sliderTrack.style.transform = `translateX(-${offset}%)`;
                }, 50); 
                
            } else {
                // Normal transition step
                sliderTrack.style.transition = SMOOTH_TRANSITION; 
                let offset = currentSlide * shiftAmount;
                sliderTrack.style.transform = `translateX(-${offset}%)`;
            }
        }

        setupSlider();
        
        // Start the automatic sliding interval
        let sliderIntervalId = setInterval(nextSlide, slideInterval);

        // Resize listener remains the same
        let resizeTimer;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(() => {
                setupSlider();
                
                clearInterval(sliderIntervalId);
                sliderIntervalId = setInterval(nextSlide, slideInterval);
            }, 250); 
        });
    });
</script>

<!-- 
<script>
     document.addEventListener('DOMContentLoaded', () => {
            const sliderTrack = document.getElementById('sliderTrack');
            const slideCount = sliderTrack.children.length; 
            let currentSlide = 0; 
            const slideInterval = 3500;
            const SMOOTH_TRANSITION = 'transform 0.5s ease-in-out';
        
            function getSlidesVisible() {
    const width = window.innerWidth;
    
    // Tailwind default breakpoints: md: 768px, lg: 1024px
    if (width >= 1024) { 
        return 4; // Lg: screens and up (6 slides visible)
    } else if (width >= 768) {
        return 2; // Md: screens (4 slides visible)
    } else {
        return 1; // Default (mobile)
    }
}
        
            function setupSlider() {
                const slidesVisible = getSlidesVisible();
                const trackWidth = (slideCount / slidesVisible) * 100;
                sliderTrack.style.width = `${trackWidth}%`;
                
                currentSlide = 0;
                sliderTrack.style.transition = 'none';
                sliderTrack.style.transform = `translateX(0)`;
            }
        
            function nextSlide() {
                const slidesVisible = getSlidesVisible();
                const shiftAmount = 100 / slidesVisible; 
                const maxShiftIndex = Math.ceil(slideCount - slidesVisible);
                
                currentSlide++;
        
                if (currentSlide > maxShiftIndex) {
                    currentSlide = 0;
                    sliderTrack.style.transition = 'none'; 
                    
                    setTimeout(() => {
                        sliderTrack.style.transition = SMOOTH_TRANSITION;
                    }, 50); 
                } else {
                    sliderTrack.style.transition = SMOOTH_TRANSITION; 
                }
                
                let offset = currentSlide * shiftAmount;
                
                if (currentSlide === maxShiftIndex) {
                    offset = maxShiftIndex * shiftAmount;
                }
        
                sliderTrack.style.transform = `translateX(-${offset}%)`;
            }
        
            setupSlider();
            
            let sliderIntervalId = setInterval(nextSlide, slideInterval);
        
            let resizeTimer;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(() => {
                    setupSlider();
                    
                    clearInterval(sliderIntervalId);
                    sliderIntervalId = setInterval(nextSlide, slideInterval);
                }, 250); 
            });
        });

  </script> -->

{% endblock content %}

