{% load static tailwind_tags %}
{% load static %}


<navbar class="w-full  z-50 text-gray-900 bg-gradient-to-br mt-5 from-transparent to-yellow-100">

  <nav
    class="flex justify-between bg-black rounded-2xl border-5 border-white  items-center py-2 mx-auto md:px-12 lg:px-16 xl:px-24">

    <button
      class="sidebar-open block md:hidden ml-10 mt-5  relative z-30 focus:outline-none transform  -translate-x-1/2 -translate-y-1/2 active:scale-75 transition-transform">
      <svg xmlns="http://www.w3.org/2000/svg"
        class="text-gray-500 btn-open h-5 w-5 transform transition duration-500 ease-in-out" viewBox="0 0 20 20"
        fill="currentColor">
        <path fill-rule="evenodd"
          d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
          clip-rule="evenodd" />
      </svg>
      <svg xmlns="http://www.w3.org/2000/svg"
        class="btn-close text-gray-500 hidden h-5 w-5 transform transition duration-500 ease-in-out" viewBox="0 0 20 20"
        fill="currentColor">
        <path fill-rule="evenodd"
          d="M3 7a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 13a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
          clip-rule="evenodd" />
      </svg>
    </button>

    <!-- logo -->
    <!-- <a href="javascript:void(0)" class="mt-3 "><img src="{% static 'base/assets/img/Navbar_logo.png' %}" alt="logo"
        class='w-[200px] h-[60px] ' />
    </a>
    <a href="javascript:void(0)" class="hidden mt-2"><img src="{% static 'base/assets/img/logo-short.jpeg' %}" alt="logo"
        class='w-8' />
    </a> -->

    <a href="{% url 'index' %}" class="mt-3">
    <img src="{% static 'base/assets/img/Navbar_logo.png' %}" alt="logo" class='w-[200px] h-[60px]' />
</a>
<a href="{% url 'index' %}" class="hidden mt-2">
    <img src="{% static 'base/assets/img/logo-short.jpeg' %}" alt="logo" class='w-8' />
</a>

    {% if request.user.is_authenticated %}
    <div
      class="menu-responsive hidden fixed flex inset-0 transition-all bg-black/70 backdrop-blur-xl z-20 md:static md:bg-transparent md:flex items-center justify-center space-y-8 md:space-y-0 flex-col md:flex-row md:space-x-8 -mt-56 md:mt-0 ">
      <ul class="flex flex-col md:flex-row items-center space-y-6 md:space-y-0 md:space-x-6 lg:md:-x-8">

        {% url 'add_event' as add_event_url %}
        <li class="text-lg md:text-base lg:text-lg font-medium group  {% if request.path == add_event_url %}text-red-600{% else %}text-white{% endif %}">
          <a href="{% url 'add_event' %}">Add Event</a>
          <div
            class="h-0.5 bg-red-600 scale-x-0 group-hover:scale-100 transition-transform origin-left rounded-full duration-300 ease-out  {% if request.path == add_event_url %}scale-x-100{% endif %}"">
          </div>
        </li>

        {% url 'index' as index_url %}
        <li class="text-lg md:text-base lg:text-lg font-medium group {% if request.path == index_url %}text-red-600{% else %}text-white{% endif %}">
          <a href="{% url 'index' %}">All Events
          </a>
          <div
            class="h-0.5 {% if request.path == index_url %}scale-x-100{% endif %} bg-red-600 scale-x-0 group-hover:scale-100 transition-transform origin-left rounded-full duration-300 ease-out">
          </div>
        </li>

         {% url 'admin_dashboard' request.user.id as dashboard_url %}
        <li class="text-lg md:text-base lg:text-lg font-medium group  {% if request.path == dashboard_url %}text-red-600{% else %}text-white{% endif %}">
          <a href="{% url 'admin_dashboard' request.user.id %}">Your Events
          </a>
          <div
            class="h-0.5 {% if request.path == dashboard_url %}scale-x-100{% endif %} bg-red-600 scale-x-0 group-hover:scale-100 transition-transform origin-left rounded-full duration-300 ease-out">
          </div>
        </li>
        {% url 'logout' as logout_url %}
        <li class="text-lg md:text-base lg:text-lg font-medium group {% if request.path == logout_url %}text-red-600{% else %}text-white{% endif %}">
          <a href="{% url 'logout' %}">Logout</a>
          <div
            class="h-0.5 {% if request.path == logout_url %}scale-x-100{% endif %} bg-red-600 scale-x-0 group-hover:scale-100 transition-transform origin-left rounded-full duration-300 ease-out">
          </div>
        </li>

      </ul>
    </div>
<button class="bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-1  border-red-600 hover:border-red-500 rounded cursor-pointer max-md:mr-5    whitespace-nowrap
     shadow-lg hover:shadow-xl transform hover:scale-105 transition duration-500 focus:outline-none block md:hidden ">
  <a href="{% url 'add_event' %}">Add Event</a>
</button>

    {% else %}
    <!-- menu -->
    <div
      class="menu-responsive hidden fixed flex inset-0 transition-all bg-black/70 backdrop-blur-xl z-20 md:static md:bg-transparent md:flex items-center justify-center space-y-8 md:space-y-0 flex-col md:flex-row md:space-x-8 -mt-56 md:mt-0 ">
      <ul class="flex flex-col md:flex-row items-center space-y-6 md:space-y-0 md:space-x-6 lg:md:-x-8">

        {% url 'index' as home_url %}
        <li class="text-lg md:text-base lg:text-lg font-medium group  {% if request.path == home_url %}text-red-600{% else %}text-white{% endif %}">
          <a href="{% url 'index' %}">Home
          </a>
          <div
            class="h-0.5 {% if request.path == home_url %}scale-x-100{% endif %} bg-red-600 scale-x-0 group-hover:scale-100 transition-transform origin-left rounded-full duration-300 ease-out">
          </div>
        </li>

        {% url 'past_events' as past_events_url %}
        <li class="text-lg md:text-base lg:text-lg font-medium group {% if request.path == past_events_url %}text-red-600{% else %}text-white{% endif %}">
          <a href="{% url 'past_events' %}">Past Events
          </a>
          <div
            class="h-0.5 {% if request.path == past_events_url %}scale-x-100{% endif %} bg-red-600 scale-x-0 group-hover:scale-100 transition-transform origin-left rounded-full duration-300 ease-out">
          </div>
        </li>

        {% url 'upcoming_events' as upcoming_events_url %}
        <li class="text-lg md:text-base lg:text-lg font-medium group {% if request.path == upcoming_events_url %}text-red-600{% else %}text-white{% endif %}">
          <a href="{% url 'upcoming_events' %}">Upcoming Events
          </a>
          <div
            class="h-0.5  {% if request.path == upcoming_events_url %}scale-x-100{% endif %} bg-red-600 scale-x-0 group-hover:scale-100 transition-transform origin-left rounded-full duration-300 ease-out">
          </div>
        </li>

         {% url 'about_us' as about_us_url %}
        <li class="text-lg md:text-base lg:text-lg font-medium group  {% if request.path == about_us_url %}text-red-600{% else %}text-white{% endif %}">
          <a href="{% url 'about_us' %}">About
          </a>
          <div
            class="h-0.5 bg-red-600  {% if request.path == about_us_url %}scale-x-100{% endif %} scale-x-0 group-hover:scale-100 transition-transform origin-left rounded-full duration-300 ease-out">
          </div>
        </li>
         {% url 'user_login' as login_url %}
        <li class="text-lg md:text-base lg:text-lg font-medium group   {% if request.path == login_url %}text-red-600{% else %}text-white{% endif %}">
          <a href="{% url 'user_login' %}">Login
          </a>
          <div
            class="h-0.5    {% if request.path == login_url %}scale-x-100{% endif %} bg-red-600 scale-x-0 group-hover:scale-100 transition-transform origin-left rounded-full duration-300 ease-out">
          </div>
        </li>
      </ul>
    </div>




    <!-- search -->

    <button class="max-md:mr-5 search-menu  cursor-pointer flex justify-center items-center h-12 px-5 font-medium text-gray-100 bg-red-600 whitespace-nowrap hover:bg-red-700 hover:text-white
    rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition duration-500 focus:outline-none">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd"
          d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
          clip-rule="evenodd" />
      </svg>
    </button>
    {% endif %}
  </nav>

  <!-- search bar -->
  <form action="{{ request.path }}" method="GET">
    <div class="search-form mt-5 max-h-0 opacity-0 overflow-hidden flex items-center space-x-4 px-6 mx-auto max-w-screen-xl md:px-12 lg:px-16 xl:px-24 
  transform transition-all duration-500 ease-in-out">
      <div class="flex bg-gray-200  p-2 w-full space-x-2 rounded-lg items-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 opacity-75 ml-4" fill="none" viewBox="0 0 24 24"
          stroke="currentColor">
          <path stroke-linecap="" stroke-linejoin="" stroke-width="2"
            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
        <input
          class="w-full bg-gray-50 outline-none border-transparent focus:border-transparent focus:ring-0 px-2 rounded-sm text-sm sm:text-base"
          name="q" value="{{ request.GET.q }}" type="text" placeholder="Search for event" />
        <button type="submit" class="cursor-pointer hover:scale-105 hover:underline">Search</button>

      </div>
    </div>
  </form>



</navbar>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins&display=swap');

  body {
    font-family: 'Poppins', sans-serif;
  }
</style>


<script>
  const btn = document.querySelector("button.sidebar-open")
  const menu = document.querySelector(".menu-responsive")
  const buttonOpen = document.querySelector(".btn-open")
  const buttonClose = document.querySelector(".btn-close")

  const buttonMenu = document.querySelector("button.search-menu")
  const formSearch = document.querySelector(".search-form")

  // Sidebar toggle
  btn.addEventListener("click", () => {
    menu.classList.toggle("hidden")
    buttonOpen.classList.toggle("hidden")
    buttonClose.classList.toggle("hidden")
  })

  // Search toggle
  buttonMenu.addEventListener("click", () => {
    if (formSearch.classList.contains("max-h-0")) {
      formSearch.classList.remove("max-h-0", "opacity-0")
      formSearch.classList.add("max-h-40", "opacity-100") // fade + drop
    } else {
      formSearch.classList.remove("max-h-40", "opacity-100")
      formSearch.classList.add("max-h-0", "opacity-0") // fade + collapse
    }
  })

  // Other unused toggle (safe to remove if not needed)
  var toggleOpen = document.getElementById('toggleOpen');
  var toggleClose = document.getElementById('toggleClose');
  var collapseMenu = document.getElementById('collapseMenu');

  function handleClick() {
    if (collapseMenu.style.display === 'block') {
      collapseMenu.style.display = 'none';
    } else {
      collapseMenu.style.display = 'block';
    }
  }

  if (toggleOpen && toggleClose) {
    toggleOpen.addEventListener('click', handleClick);
    toggleClose.addEventListener('click', handleClick);
  }
</script>